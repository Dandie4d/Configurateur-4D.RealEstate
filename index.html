<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4D.RealEstate - Configurateur de Prestations</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --dior-black: #181818;
      --dior-white: #fff;
      --dior-grey: #f7f7f7;
      --dior-gold: #e6cfa7;
      --dior-border: #e5e5e5;
      --dior-shadow: 0 4px 24px rgba(0,0,0,0.04);
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: var(--dior-grey);
    }
    body {
      font-family: 'Playfair Display', Georgia, 'Times New Roman', Times, serif;
      color: var(--dior-black);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      background-color: var(--dior-grey);
    }
    .container {
      background: var(--dior-white);
      border-radius: 18px;
      box-shadow: var(--dior-shadow);
      padding: 2.5rem 2.2rem 2.2rem 2.2rem;
      max-width: 480px;
      width: 100%;
      margin: 3rem auto 2rem auto;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1, h2, h3 {
      font-weight: 700;
      letter-spacing: 0.03em;
      text-align: center;
      margin-top: 0;
      margin-bottom: 1.5rem;
      color: var(--dior-black);
      line-height: 1.25;
    }
    h1 { font-size: 2.1rem; margin-bottom: 2.1rem; }
    h2 { font-size: 1.3rem; margin-bottom: 1.2rem; }
    h3 { font-size: 1.1rem; margin-bottom: 1rem; }
    .intro {
      text-align: center;
      color: #444;
      font-size: 1.08rem;
      margin-bottom: 2.2rem;
      line-height: 1.7;
      font-family: 'Playfair Display', serif;
      max-width: 90%;
    }
    form {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    label {
      font-weight: 700;
      font-size: 0.99rem;
      letter-spacing: 0.04em;
      color: var(--dior-black);
      text-transform: uppercase;
      margin-bottom: 0.3rem;
      margin-top: 0.6rem;
      line-height: 1.4;
    }
    input[type="number"], select, input[type="email"] {
      width: 100%;
      padding: 0.7rem 1rem;
      border-radius: 6px;
      border: 1px solid var(--dior-border);
      font-size: 1.08rem;
      background: var(--dior-white);
      color: var(--dior-black);
      transition: border 0.2s;
      font-family: 'Playfair Display', serif;
      box-sizing: border-box;
      margin-bottom: 0.2rem;
      line-height: 1.5;
    }
    input[type="number"]:focus, select:focus, input[type="email"]:focus {
      outline: none;
      border-color: var(--dior-gold);
    }
    button {
      margin: 2.2rem auto 1.2rem auto;
      padding: 0.9rem 2.6rem;
      font-size: 1.09rem;
      background: var(--dior-white);
      color: var(--dior-black);
      border: 1.5px solid var(--dior-black);
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      letter-spacing: 0.04em;
      transition: background 0.2s, color 0.2s, border 0.2s;
      box-shadow: none;
      display: block;
    }
    button:hover {
      background: var(--dior-black);
      color: var(--dior-white);
      border-color: var(--dior-gold);
    }
    .advice, .explication {
      background: var(--dior-grey);
      border-left: 4px solid var(--dior-gold);
      padding: 1.1rem 1.3rem;
      margin-top: 1.5rem;
      border-radius: 8px;
      font-size: 1.02rem;
      color: var(--dior-black);
      font-family: 'Playfair Display', serif;
      line-height: 1.7;
      margin-bottom: 1.4rem;
    }
    .explication { border-color: var(--dior-black); }
    .packs {
      width:100%;max-width:440px;margin:2.5rem auto 0 auto;
      display: flex; flex-direction: column; gap: 1.1rem;
    }
    .packs h2 { margin-bottom:0.7rem; }
    .pack {
      background: var(--dior-grey);
      border-left:4px solid var(--dior-gold);
      border-radius:8px;
      padding:1rem 1.2rem;
      line-height:1.6;
      font-size:1.01rem;
      margin-bottom:0.2rem;
    }
    .pack.panorama { border-color:#b7b7b7; }
    .pack.prestige { border-color:#181818; }
    .pack b { color:var(--dior-black);}
    .chart-container {
      max-width: 350px;
      margin: 2rem auto 1rem auto;
      width: 100%;
      display: flex;
      justify-content: center;
    }
    .cta {
      border-color: var(--dior-black);
      background: var(--dior-white);
      text-align: center;
      font-size: 1.08rem;
      margin-bottom: 1.2rem;
      margin-top: 2.2rem;
      font-family: 'Playfair Display', serif;
      padding: 1.2rem;
      border-radius: 10px;
      border: 1px solid var(--dior-border);
      box-shadow: 0 2px 12px rgba(0,0,0,0.04);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.1rem;
    }
    .cta a {
      display: inline-block;
      min-width: 120px;
      margin: 0.2em 0.6em 0 0.6em;
      padding: 0.65em 1.3em;
      border-radius: 6px;
      border: 1.2px solid var(--dior-black);
      background: var(--dior-white);
      color: var(--dior-black);
      font-weight: bold;
      text-decoration: none;
      font-size: 1.08rem;
      letter-spacing: 0.03em;
      transition: background 0.2s, color 0.2s, border 0.2s;
    }
    .cta a:hover {
      background: var(--dior-black);
      color: var(--dior-gold);
      border-color: var(--dior-gold);
      text-decoration: none;
    }
    @media (max-width: 600px) {
      .container { padding: 1.2rem 0.3rem; }
      h1 { font-size: 1.45rem; }
      .chart-container { margin: 1.1rem auto 1rem auto; }
      .cta { padding: 0.7rem; }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <h1>Configurateur Photo & Vid√©o Immobilier</h1>
    <div class="intro">
      Calculez votre offre personnalis√©e en quelques secondes.<br>
      <span style="color:#a38a5d;">Contactez-nous pour sublimer votre bien immobilier.</span>
    </div>

    <form id="configForm" autocomplete="off" onsubmit="event.preventDefault(); calculer();">
      <label for="photos">Nombre de photos immobili√®res (20‚ÄØ‚Ç¨/photo)</label>
      <input type="number" id="photos" min="0" value="5" placeholder="ex : 8" required>

      <label for="drone">Nombre de photos drone (30‚ÄØ‚Ç¨/photo)</label>
      <input type="number" id="drone" min="0" value="3" placeholder="ex : 3" required>

      <label for="video">Souhaitez-vous une vid√©o drone ?</label>
      <select id="video" required>
        <option value="no">Non</option>
        <option value="yes">Oui</option>
      </select>

      <button type="submit">Calculer mon offre</button>
    </form>

    <div class="packs">
      <h2>Nos Packs</h2>
      <div class="pack essentiel">
        <b>Pack Essentiel</b> :<br>
        5 photos immobili√®res<br>
        <b>Prix‚ÄØ: 100‚ÄØ‚Ç¨</b>
      </div>
      <div class="pack panorama">
        <b>Pack Panorama</b> :<br>
        5 photos immobili√®res + 3 photos drone<br>
        <b>Prix‚ÄØ: 190‚ÄØ‚Ç¨</b>
      </div>
      <div class="pack prestige">
        <b>Pack Prestige</b> :<br>
        5 photos immobili√®res + 3 photos drone + vid√©o drone<br>
        <b>Prix‚ÄØ: 240‚ÄØ‚Ç¨</b> <span style="color:#43a047;">(5% de r√©duction incluse)</span>
      </div>
    </div>

    <div id="resultat"></div>
    <div class="chart-container">
      <canvas id="chart" width="350" height="350"></canvas>
    </div>
  </div>

  <div class="cta" style="margin-top:3rem;">
    <span style="font-size:1.15em; font-weight:700; letter-spacing:0.04em;">Contact direct</span>
    <a href="tel:0492269359">Appeler</a>
    <a href="https://www.instagram.com/4d.reality?igsh=MTZtZ2llYzJlZ2Focw==" target="_blank">Instagram</a>
  </div>

  <script>
    let mailtoLink = "";

    function calculer() {
      const nbPhotos = Math.max(0, parseInt(document.getElementById('photos').value) || 0);
      const nbDrone = Math.max(0, parseInt(document.getElementById('drone').value) || 0);
      const wantsVideo = document.getElementById('video').value === 'yes';

      // Tarifs
      const prixPhotoUnitaire = 20;
      const prixDroneUnitaire = 30;

      // Packs
      const packEssentiel = { photos: 5, drone: 0, video: false, prix: 100, nom: "Pack Essentiel" };
      const packPanorama = { photos: 5, drone: 3, video: false, prix: 190, nom: "Pack Panorama" };
      const packPrestige = { photos: 5, drone: 3, video: true, prix: 240, nom: "Pack Prestige" };

      // Calcul du prix des options choisies
      const prixPhoto = prixPhotoUnitaire * nbPhotos;
      const prixDrone = prixDroneUnitaire * nbDrone;

      // Calcul du prix vid√©o drone selon la logique demand√©e
      let prixVideo = 0;
      if (wantsVideo) {
        if (nbPhotos > 0 && nbDrone > 0) {
          prixVideo = 60;
        } else if (nbPhotos > 0 || nbDrone > 0) {
          prixVideo = 80;
        } else {
          prixVideo = 100;
        }
      }

      let total = prixPhoto + prixDrone + prixVideo;
      let reduction = 0;

      // Appliquer 5% de r√©duction si le client prend au moins 5 photos, 3 drone et la vid√©o
      if (nbPhotos >= 5 && nbDrone >= 3 && wantsVideo) {
        reduction = 0.05 * total;
        total = total * 0.95;
      }

      // Suggestion de pack selon la s√©lection
      let suggestion = "";
      if (nbPhotos >= 5 && nbDrone >= 3 && wantsVideo) {
        suggestion = `<div class="advice" style="border-color:#43a047;">
          üéâ <b>Bravo !</b> Vous b√©n√©ficiez de notre <b>Pack Prestige</b> avec 5% de r√©duction.<br>
          C'est l'offre la plus compl√®te pour sublimer votre bien.
        </div>
        <div style="height:1.5em"></div>
        <a href="#" id="btnMail" class="cta" style="display:block;max-width:330px;margin:2.2em auto 0 auto;text-align:center;">Valider ma prestation par mail</a>
        `;
      } else if (nbPhotos >= 5 && nbDrone >= 3 && !wantsVideo) {
        suggestion = `<div class="advice" style="border-color:#b7b7b7;">
          üí° <b>Astuce :</b> Pour une pr√©sentation encore plus immersive, optez pour notre <b>Pack Prestige</b> (ajoutez la vid√©o drone pour seulement 60‚ÄØ‚Ç¨ de plus et b√©n√©ficiez d'une r√©duction de 5%).
        </div>
        <div style="height:1.5em"></div>
        <a href="#" id="btnMail" class="cta" style="display:block;max-width:330px;margin:2.2em auto 0 auto;text-align:center;">Valider ma prestation par mail</a>
        `;
      } else if (nbPhotos >= 5 && nbDrone === 0 && !wantsVideo) {
        suggestion = `<div class="advice" style="border-color:#e6cfa7;">
          üí° <b>Astuce :</b> Essayez notre <b>Pack Panorama</b> pour profiter des vues a√©riennes et d√©marquer votre annonce.
        </div>
        <div style="height:1.5em"></div>
        <a href="#" id="btnMail" class="cta" style="display:block;max-width:330px;margin:2.2em auto 0 auto;text-align:center;">Valider ma prestation par mail</a>
        `;
      } else if (nbPhotos === 0 && nbDrone === 0 && !wantsVideo) {
        suggestion = `<div class="advice" style="border-color:#e6cfa7;">
          üí° <b>Conseil :</b> D√©couvrez nos packs pour une valorisation optimale de votre bien.<br>
          <b>Pack Essentiel</b> : 5 photos pro<br>
          <b>Pack Panorama</b> : 5 photos pro + 3 drone<br>
          <b>Pack Prestige</b> : 5 photos pro + 3 drone + vid√©o drone<br>
        </div>
        <div style="height:1.5em"></div>
        <a href="#" id="btnMail" class="cta" style="display:block;max-width:330px;margin:2.2em auto 0 auto;text-align:center;">Valider le pack d√©couverte par mail</a>
        `;
      } else if (wantsVideo && nbPhotos === 0 && nbDrone === 0) {
        suggestion = `<div class="advice" style="border-color:#e6cfa7;">
          üí° <b>Astuce :</b> La vid√©o seule co√ªte 100‚ÄØ‚Ç¨. Ajoutez des photos classiques ou drone pour b√©n√©ficier d'une vid√©o √† 80‚ÄØ‚Ç¨, ou prenez le <b>Pack Prestige</b> pour la vid√©o √† 60‚ÄØ‚Ç¨ !
        </div>
        <div style="height:1.5em"></div>
        <a href="#" id="btnMail" class="cta" style="display:block;max-width:330px;margin:2.2em auto 0 auto;text-align:center;">Valider ma prestation par mail</a>
        `;
      } else {
        suggestion = `<div style="height:1.5em"></div>
        <a href="#" id="btnMail" class="cta" style="display:block;max-width:330px;margin:2.2em auto 0 auto;text-align:center;">Valider ma prestation par mail</a>
        `;
      }

      // G√©n√©ration du mailto dynamique
      let subject = "Demande de prestation 4D.RealEstate";
      let body =
`Bonjour,

Merci d'avoir utilis√© le configurateur 4D.RealEstate. Voici le r√©capitulatif de votre demande :

- Photos classiques : ${nbPhotos} = ${prixPhoto}‚ÄØ‚Ç¨
- Photos drone : ${nbDrone} = ${prixDrone}‚ÄØ‚Ç¨
- Vid√©o drone : ${wantsVideo ? 'Oui' : 'Non'} = ${prixVideo}‚ÄØ‚Ç¨
${reduction > 0 ? '- R√©duction : -' + reduction.toFixed(2) + '‚ÄØ‚Ç¨\n' : ''}
Prix total : ${total.toFixed(2)}‚ÄØ‚Ç¨

Nous restons √† votre disposition pour toute question ou pour finaliser votre commande.

Cordialement,
L‚Äô√©quipe 4D.RealEstate
realestate4d@hotmail.com
T√©l : 0492 269 359
Instagram : https://www.instagram.com/4d.reality?igsh=MTZtZ2llYzJlZ2Focw==
`;

      mailtoLink = `mailto:realestate4d@hotmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

      document.getElementById('resultat').innerHTML = `
        <h2>R√©sum√© de votre prestation</h2>
        <p>Photos classiques : <strong>${nbPhotos}</strong> ‚Üí <strong>${prixPhoto}‚ÄØ‚Ç¨</strong></p>
        <p>Photos drone : <strong>${nbDrone}</strong> ‚Üí <strong>${prixDrone}‚ÄØ‚Ç¨</strong></p>
        <p>Vid√©o drone : <strong>${wantsVideo ? 'Oui' : 'Non'}</strong> ‚Üí <strong>${prixVideo}‚ÄØ‚Ç¨</strong></p>
        ${reduction > 0 ? `<p>R√©duction : <strong>-${reduction.toFixed(2)}‚ÄØ‚Ç¨</strong></p>` : ''}
        <h3>Prix total : <strong>${total.toFixed(2)}‚ÄØ‚Ç¨</strong></h3>
        ${suggestion}
      `;

      setTimeout(() => {
        const btnMail = document.getElementById('btnMail');
        if(btnMail) {
          btnMail.onclick = function(e) {
            e.preventDefault();
            window.location.href = mailtoLink;
          };
        }
      }, 100);

      // Graphique
      const ctx = document.getElementById('chart').getContext('2d');
      if (window.pieChart) window.pieChart.destroy();
      window.pieChart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: ['Photos classiques', 'Photos drone', 'Vid√©o drone'],
          datasets: [{
            data: [prixPhoto, prixDrone, prixVideo],
            backgroundColor: ['#181818', '#e6cfa7', '#bbb']
          }]
        },
        options: {
          plugins: {
            legend: { labels: { color: '#181818', font: { size: 14 } } }
          }
        }
      });
    }
  </script>
</body>
</html>
